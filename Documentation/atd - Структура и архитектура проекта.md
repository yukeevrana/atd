---
tags:
  - структура
  - архитектура
  - многопоточность
  - асинхронное-программирование
  - асинхронность
date: 2026-02-13T14:49:00
---

---
# Структура и архитектура проекта

Проект задуман несложным первым проектом на Unity, однако, было принято решение сразу начать применять практики, которые хотелось бы применить в будущем на более сложных проектах. Например, по возможности подготовить почву для многопоточности и асинхронности. С помощью Gemini были выведены следующие постулаты:

- Если в текущий момент необходимости в чрезмерных оптимизациях нет, но подразумевается, что в будущем такая необходимость может появиться, не нужно сразу писать многопоточный код, но **нужно подготовить архитектуру** проекта для этого, чтобы не пришлось слишком много переписывать в будущем.
- **Отделение данных.** Чистые данные, несвязанные с сущностями Unity должны храниться отдельно. Это все основные данные игры, представленные структурами и числами. Любые объекты или свойства Unity должны быть отдельно, т.к. к ним можно получить доступ только из основного потока.
- **Структуры, а не классы.** Почти всё, что связано с многопоточностью в Unity работает со структурами, а не классами. 
- **Отделение систем.** Системы, работающие с чистыми данными, принимающие числа и структуры на вход и отдающие числа и структуры на выходе. Системы изначально пишутся в одном потоке, но применяя эти правила, любую из систем можно будет сделать асинхронной или многопоточной при необходимости. Ничего из UnityEngine использовать в логике систем не рекомендуется.
- **Пакетная обработка** вместо индивидуальной обработки каждого объекта в Update. Скрипты-менеджеры (которые могут обращаться к UnityEngine и наследоваться от MonoBehaviour), обрабатывают с помощью систем массивы структур. 

Используя данные постулаты можно начать проект, не думая слишком много об оптимизации, без использования сложных систем. Однако, в последующем, если появится такая необходимость, можно будет начать использовать ECS и многопоточность, не переписывая проект.


---
## Links


---